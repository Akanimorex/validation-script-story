<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="icon" href="/img/favicon.png" type="image/png" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />

    <!-- Google font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Sen:wght@400;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap Select Picker Plugin -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.min.css"
    />

    <!-- Custom style  -->
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/special-order.css" />
    <link rel="stylesheet" href="css/form.css" />
    <title>Gerrit</title>
  </head>
  <body>
    
    <main>
      <section class="container form">
        <div class="row">
          <div class="col">
            <form
              method="POST"
              action="https://us-central1-gerrit-16e7e.cloudfunctions.net/app/user/sign-up"
              name="signup"
              class="mx-auto"
            >
              <h1 class="font-weight-bold">Create a Gerrit account</h1>
              <p class="text-center">Get your items delivered in minutes</p>
              <div class="form-group">
                <label class="font-weight-bold" for="first_name">First name</label>
                <input
                  class="form-control custom-control-f"
                  type="text"
                  id="first_name"
                  name="first_name"
                />
              </div>
              <div class="form-group">
                <label class="font-weight-bold" for="last_name">Last name</label>
                <input
                  class="form-control custom-control-f"
                  type="text"
                  id="last_name"
                  name="last_name"
                />
              </div>

              <div class="form-group">
                <label class="font-weight-bold" for="gender">Gender</label>
                <select class="form-control custom-control-f" name="gender">
                  <option value="">Click to select</option>
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                </select>
              </div>
              <div class="form-group">
                <label class="font-weight-bold" for="phone">Phone no</label>
                <input
                  class="form-control custom-control-f"
                  type="tel"
                  id="phone"
                  name="phone"
                />
              </div>
              <div class="form-group">
                <label class="font-weight-bold" for="email">Email</label>
                <input
                  class="form-control custom-control-f"
                  type="email"
                  id="email"
                  name="email"
                />
              </div>
              <div class="form-group">
                <label class="font-weight-bold" for="password">Password</label>
                <input
                  class="form-control custom-control-f"
                  type="password"
                  id="password"
                  name="password"
                />
              </div>
              <div class="form-group">
                <label class="font-weight-bold" for="password-2"
                  >Confirm password</label
                >
                <input
                  class="form-control custom-control-f"
                  type="password"
                  id="password-2"
                  name="password-2"
                />
              </div>
              <div class="form-group">
                <input
                  type="submit"
                  class="btn btn-primary custom-btn btn-r w-100"
                  value="REGISTER"
                />
              </div>
            </form>
          </div>
        </div>
      </section>
      <div class="container">
        <div class="row">
          <div class="col text-center">
            <p>
              <a href="signin.html" class="link">Already have an account? Log in</a>
            </p>
          </div>
        </div>
      </div>
    </main>

    <footer></footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>

    <!-- Bootstrap Select Plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/7.14.2/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.14.2/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.14.2/firebase-storage.js"></script>
    <script defer src="/__/firebase/7.14.2/firebase-firestore.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        document.signup.onsubmit = function(event) {
          event.preventDefault();
          let form = document.signup;
          let details = {
            first_name: form.first_name.value,
            last_name: form.last_name.value,
            phone: form.phone.value,
            email: form.email.value,
            gender: form.gender.value,
            password: form.password.value
          }
          
          fetch('https://us-central1-gerrit-16e7e.cloudfunctions.net/app/user/create',
            {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json;charset=utf-8'
              },
              body: JSON.stringify(details)
            }
          )
            .then(dbResult=>{
              console.log(dbResult)
              console.log(dbResult.json())
              let data_ = dbResult.json();
              if(data_.status == false){
                location.reload();
              }else{
                location.href = '/dashboard.html'
              }
            })
            .catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              console.log(error);
              console.log(error.message);
            });
        };
      });
    </script>
  </body>
</html>
